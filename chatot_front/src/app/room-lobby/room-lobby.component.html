<div class="flex flex-column h-full">
  <input type="text" readonly
         [value]="room.url"
         [ngClass]="{blue: url_copied}"
         style="cursor: pointer; margin-bottom: 1em;"
         (click)="copyUrl()"
         ngDefaultControl name="url"
  />

  <div style="display: grid; grid-template: 1fr / 1fr 2fr">
    <img [src]="room.currentPlayer.profilePictureSrc" width="250"/>
    <div class="flex flex-column align-items-center">
      <h3>{{room.currentPlayer.name}}</h3>
      <div class="flex align-items-center" style="gap: 20px">
        <button [disabled]="pp_index === 0" (click)="pp_index = pp_index - 9">&lt;</button>
        <div id="pp_grid">
          <img
            *ngFor="let i of one_to_nine"
            [ngClass]="{disabled: PPs[pp_index+i] !== room.currentPlayer.profilePicture, unavailable: isPPUnavailable(PPs[pp_index+i])}"
            (click)="changePP(PPs[pp_index+i])"
            [src]="'https://raw.githubusercontent.com/PMDCollab/SpriteCollab/master/portrait/'+(PPs[pp_index]+i).toString().padStart(4, '0')+'/Normal.png'"
            width="50"
          />
        </div>
        <button [disabled]="pp_index + 9 === PPs.length" (click)="pp_index = pp_index + 9">&gt;</button>
      </div>
    </div>
  </div>
  <div class="divider">
    <span>Room parameters</span>
  </div>

  <div class="flex flex-column justify-content-between" style="flex-grow: 1">
    <div class="flex flex-column justify-content-between" style="gap: 1em">
      <div class="flex justify-content-between">
        <div class="flex align-items-center">Generations</div>
        <div class="flex justify-content-end">
          <app-select-button
            name="generations" ngDefaultControl
            [disabled]="!room.currentPlayer.isCreator"
            [options]="[1, 2, 3, 4, 5, 6, 7, 8, 9]"
            [multiple]="true"
            [ngModel]="room.params.generations"
            (ngModelChange)="updateParams('generations', $event)"
          />
        </div>
      </div>

      <div class="flex justify-content-between">
        <div class="flex align-items-center">Round count</div>
        <div class=" flex justify-content-end">
          <app-select-button
            name="round-count" ngDefaultControl
            [disabled]="!room.currentPlayer.isCreator"
            [options]="[10, 25, 50]"
            [ngModel]="room.params.nbRounds"
            (ngModelChange)="updateParams('nbRounds', $event)"
          />
        </div>
      </div>

      <div class="flex justify-content-between">
        <div class="flex align-items-center">Round duration (s)</div>
        <div class="flex justify-content-end">
          <app-select-button
            [disabled]="!room.currentPlayer.isCreator"
            [options]="[15, 30, 45]"
            [ngModel]="room.params.roundDurationSeconds"
            (ngModelChange)="updateParams('roundDurationSeconds', $event)"
          />
        </div>
      </div>

      <div class="flex justify-content-between">
        <div class="flex align-items-center">Total duration</div>
        <div class="flex justify-content-end align-items-center">
          {{totalDurationText}}
        </div>
      </div>
    </div>

    <div class="flex flex-column align-items-center">
      <button (click)="play()" style="width: 50%" [disabled]="room.currentPlayer.isCreator ? !other_players_ready() : room.currentPlayer.ready ">
        {{room.currentPlayer.isCreator ? 'Play !' : 'Ready !'}}
      </button>
    </div>
  </div>
</div>

